# 语义版本和模块

转自 https://learnku.com/docs/go-blog/publishing-go-modules/6474

`go.mod` 中的每个必需模块都有一个语义版本，这是用于构建模块的依赖项的最低版本。

语义版本的形式为`vMAJOR.MINOR.PATCH`.

* 对模块的公共 API 进行向后不兼容更改时，请增加 MAJOR 版本。仅应在绝对必要时执行此操作。
* 对 API 进行向后兼容的更改时，请增加 MINOR 版本，例如更改依赖关系或添加新的函数，方法，结构字段或类型。
* 在进行不影响模块公共 API 或依赖项的细微更改后，增加 PATCH 版本，例如修复 bug。

您可以通过添加连字符和点分隔的标识符来指定预发行版本 (例如，v1.0.1-alpha 或 v2.2.2-beta.2)。 go 命令优先于普通版本而不是预发行版本，因此用户必须明确要求预发行版本 (例如，`go get example.com/hello@v1.0.1-alpha`)(如果您的模块具有任何的正常版本)。

`v0` 主要版本和预发行版本不保证向后兼容。它们使您可以在对用户做出稳定性承诺之前优化 API。但是，v1 主要版本及更高版本要求在该主要版本内向后兼容。

`go.mod` 中引用的版本可能是存储库中标记的显式发行版 (例如 `v1.5.2`)，也可能是 pseudo-version(例如，`v0.0.0-20170915032832-14c0d48ead0c`)。伪版本是一种特殊的预发行版本。当用户需要依赖尚未发布任何语义版本标签的项目或针对尚未被标记的提交进行开发时，伪版本很有用，但用户不应假定伪版本可以提供稳定或良好的性能经过测试的 API。用显式版本标记模块会向您的用户发出信号，表明特定的版本已经过全面测试并可以使用。

一旦开始使用版本标记您的存储库，在开发模块时就必须继续标记新版本。当用户请求模块的新版本时 (`go get -u` 或 `go get example.com/hello`)，`go` 命令将选择最大版本可以使用语义发布版本，即使该版本已经使用了几年并且在主分支机构后面进行了许多更改。继续标记新版本将使您的用户可以进行持续的改进。

不要从您的仓库中删除版本标签。如果发现某个版本的错误或安全问题，请发布新版本。如果人们依赖于您已删除的版本，则其构建可能会失败。同样，发布版本后，请勿更改或覆盖版本。 模块镜像和校验和数据库存储模块，它们的版本以及带符号的加密哈希值，以确保给定版本的构建在一段时间内仍可重现。

